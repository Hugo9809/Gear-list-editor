import{g as H}from"./index-CkYn1GFl.js";import{f as O}from"./pdfExportService-CpQxvlM1.js";const F="#E10078",u="#9CA3AF",h=515,r=e=>e!=null&&e!==""?String(e).trim():"",$=e=>{if(!e)return"";try{return O(new Date(e),"P")}catch{return e}},G=e=>{const t=e!=null&&e.start?$(e.start):"",a=e!=null&&e.end?$(e.end):"";return t&&a?`${t} - ${a}`:t||a||""},b=(e,t)=>{const a=e.map(G).filter(Boolean);return a.length?a.join(", "):t},U=(e,t)=>{const a=r(e);if(!a)return{main:t,aside:""};const o=a.split("|").map(p=>p.trim()).filter(Boolean);return o.length<=1?{main:a,aside:""}:{main:o.slice(0,-1).join(" | "),aside:o[o.length-1]}},q=e=>{const t=r(e);return t?t.replace(/\s*\|\s*/g," - "):""},J=e=>{const t=r(e).toLowerCase();return t?t==="camera"||t==="kamera"?!0:t.startsWith("camera ")||t.startsWith("kamera ")?!t.includes("support")&&!t.includes("zubehoer"):!1:!1},K=e=>{var a;const t=r(e).match(/\b(?:camera|kamera)\s*([a-z])\b/i);return((a=t==null?void 0:t[1])==null?void 0:a.toUpperCase())||"A"},Q=(e,t)=>{const a=e.find(s=>J(s.name)&&(s.items||[]).length>0);if(!a)return null;const o=a.items[0],p=r(o.details),f=p.includes("|")?p.split("|").map(s=>s.trim()).filter(Boolean):[],m=[r(o.name),...f].filter(s=>s!=="");for(;m.length<5;)m.push("");return{label:r(a.name)||"Camera",letter:K(a.name),values:m.slice(0,5)}},X=e=>{if(!e)return"";const t=r(e.name),o=[r(e.phone),r(e.email)].filter(Boolean).join(" / ");return[t,o].filter(Boolean).join(" | ")};function ot(e,t,a){const{project:o}=e.data,p=o.categories||[],f=H(o.shootSchedule??o.shootDate),m=t("ui.emptyValue","â€”"),s=r(o.name),L=s&&!s.startsWith("defaults.")?s:t("project.untitled","Untitled Project"),v=a==="pink",y=v?"#E10078":"#001589",R=v?"#F06292":"#5C6BC0",w=f.shootingPeriods.length?b(f.shootingPeriods,m):"",P=(l,i)=>{const n=r(l);return!n||n.startsWith("defaults.")?`${t("project.category.defaultName","Category")} ${i+1}`:n},A=(l,i)=>{const n=r(l);return!n||n.startsWith("defaults.")?`${t("items.print.headers.item","Item")} ${i+1}`:n},B=(Array.isArray(o.crew)?o.crew:[]).map(l=>{const i=r(l.role)||t("project.print.labels.crew","Crew"),n=X(l);return n?{label:i,value:n}:null}).filter(Boolean),D=[{label:t("project.print.labels.client","Client"),value:o.client},{label:t("project.print.labels.location","Location"),value:o.location},{label:t("project.print.labels.contact","Rental house"),value:o.contact},{label:t("project.print.labels.resolution","Resolution"),value:o.resolution},{label:t("project.print.labels.aspectRatio","Aspect ratio"),value:o.aspectRatio},{label:t("project.print.labels.codec","Codec"),value:o.codec},{label:t("project.print.labels.framerate","Framerate"),value:o.framerate},...B,{label:t("project.print.labels.prep","Prep"),value:b(f.prepPeriods,m)},{label:t("project.print.labels.shooting","Shoot"),value:b(f.shootingPeriods,m)},{label:t("project.print.labels.return","Return"),value:b(f.returnDays,m)}].map(({label:l,value:i})=>{const{main:n,aside:c}=U(i,m);return[{text:[{text:`${l} `,style:"metaLabel"},{text:n,style:"metaValue"}],style:"metaRow"},{text:c,style:"metaAside",alignment:"right"}]}),g=Q(p);let x=null;if(g){const l=[String((o==null?void 0:o.resolution)??""),String((o==null?void 0:o.aspectRatio)??""),String((o==null?void 0:o.codec)??""),String((o==null?void 0:o.framerate)??"")],i=[...g.values,...l];x={table:{widths:[90,...Array(i.length).fill("*")],body:[[{text:[{text:`${g.label.replace(/\s+[a-z]$/i,"").trim()||g.label} `,bold:!0},{text:g.letter,bold:!0,color:F}],fontSize:9},...i.map(c=>({text:c,alignment:"center",fontSize:9}))]]},layout:{hLineWidth:()=>.5,vLineWidth:(c,C)=>c===0||c===C.table.widths.length?0:.5,hLineColor:()=>u,vLineColor:()=>u,paddingLeft:c=>c===0?0:6,paddingRight:()=>6,paddingTop:()=>4,paddingBottom:()=>4},margin:[0,6,0,10]}}const E=p.flatMap((l,i)=>{const n=l.items||[];if(n.length===0)return[];const c=P(l.name,i),C=n.map((d,S)=>{const T=r(d.quantity)||"1",_=A(d.name,S),j=q(d.details),k={text:[{text:_,bold:!0},...j?[{text:` - ${j}`}]:[]]};return[{text:`${T}x`,bold:!0},{text:""},k]});return[{canvas:[{type:"line",x1:0,y1:0,x2:h,y2:0,lineWidth:.5,lineColor:u}],margin:[0,6,0,4]},{text:c,style:"categoryHeader",color:y,margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:h,y2:0,lineWidth:.5,lineColor:u}],margin:[0,0,0,6]},{table:{widths:["auto","auto","*"],body:C},layout:{hLineWidth:()=>.5,vLineWidth:(d,S)=>d===0||d===S.table.widths.length?0:.5,hLineColor:()=>u,vLineColor:()=>u,paddingLeft:d=>d===0?0:6,paddingRight:()=>6,paddingTop:()=>4,paddingBottom:()=>4},margin:[0,0,0,6]}]}),z=r(o.notes),V=z?[{canvas:[{type:"line",x1:0,y1:0,x2:h,y2:0,lineWidth:.5,lineColor:u}],margin:[0,10,0,4]},{text:t("project.print.notes.title","Project notes"),style:"categoryHeader",color:y,margin:[0,0,0,4]},{canvas:[{type:"line",x1:0,y1:0,x2:h,y2:0,lineWidth:.5,lineColor:u}],margin:[0,0,0,6]},{text:z,fontSize:9.5}]:[],W=e.locale||"en",N=W.startsWith("de")?"Seite":"Page",I=W.startsWith("de")?"von":"of",M=t("ui.gearList","Gear list");return{pageSize:"A4",pageMargins:[40,40,40,60],footer:(l,i)=>({text:`${N} ${l} ${I} ${i} | ${M} | ${L}`,alignment:"center",color:"#666",fontSize:9,margin:[40,20,40,0]}),content:[{text:L,style:"title",color:y,margin:[0,0,0,2],fontSize:26},...w?[{text:w,style:"subtitle",color:R,margin:[0,0,0,16]}]:[],{table:{widths:["*","auto"],body:D},layout:{hLineWidth:()=>0,vLineWidth:()=>0,paddingLeft:()=>0,paddingRight:()=>0,paddingTop:()=>2,paddingBottom:()=>2},margin:[0,0,0,12]},...x?[x]:[{canvas:[{type:"line",x1:0,y1:0,x2:h,y2:0,lineWidth:.5,lineColor:u}],margin:[0,6,0,10]}],...E,...V],styles:{title:{fontSize:20,bold:!0},subtitle:{fontSize:11,bold:!0,characterSpacing:1},metaRow:{fontSize:9.5},metaLabel:{bold:!0},metaValue:{color:"#222"},metaAside:{fontSize:9.5,color:"#444"},categoryHeader:{fontSize:10.5,bold:!0}},defaultStyle:{font:"Ubuntu",fontSize:10,color:"#111"}}}export{ot as buildDocDefinition};
